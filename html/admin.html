<html>
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
  <link rel="stylesheet" type="text/css" media="all"
        href="css/jquery-ui.css" />
  <link rel="stylesheet" type="text/css" media="all"
        href="css/main.css" />
  <link rel="stylesheet" type="text/css" media="all"
        href="css/tipsy.css" />
  <title>Bugzilla Dashboard Administration</title>
</head>
<body>
<div id="header">
  <h1 class="title">Bugzilla Dashboard Administration</h1>
  <ul class="menu hide-while-loading">
    <li data-dialog="login"
        class="requires-no-auth"><span>Log In</span></li>
    <li data-command="logout"
        class="requires-auth-login"><span>Log Out (<span id="username"></span>)</span></li>
    <li data-command="dashboard"><span>Dashboard</span></li>
  </ul>
</div>
<div id="loading-screen" class="loading">&nbsp;</div>
<div class="admincol hide-while-loading">
<div class="adminpanel">
  <div class="bolttopleft"></div><div class="bolttopright"></div><div class="boltbottomleft"></div><div class="boltbottomright"></div>
  <div id="admindivisionlist" class="adminlist">
    <h2>Divisions <button class="siteadminbutton adminadd adminbutton nodisplay" type="button" data-dialog="add-division">+</button></h2>
    <div class="entitylist"></div>
  </div>
</div>
<div class="adminpanel">
  <div class="bolttopleft"></div><div class="bolttopright"></div><div class="boltbottomleft"></div><div class="boltbottomright"></div>
  <div id="admindivdetails" class="adminlist">
    <h2>Division Details</h2>
    <h3>Releases</h3>
    <div id="releases" class="entitylist"></div>
    <h3>Teams <button class="siteadminbutton adminadd adminbutton nodisplay" type="button" data-dialog="add-team">+</button></h3>
    <div id="teams" class="entitylist"></div>
  </div>
</div>
</div>
<div class="admincol hide-while-loading">
<div class="adminpanel">
  <div class="bolttopleft"></div><div class="bolttopright"></div><div class="boltbottomleft"></div><div class="boltbottomright"></div>
  <div id="adminteamdetails" class="adminlist">
    <h2>Team Details</h2>
    <h3>Products and Components <button class="teamadminbutton adminadd adminbutton nodisplay" type="button" data-dialog="add-prodcomp">+</button></h3>
    <div id="prodcomps" class="entitylist"></div>
    <h3>Members <button id="addmemberbutton" class="requires-auth-login adminadd adminbutton" type="button" data-dialog="add-member">+</button></h3>
    <div id="members" class="entitylist"></div>
  </div>
</div>
</div>
<div id="quickstatserrors">
</div>
<div id="login" class="dialog">
  <div class="content">
  <form id="login-form">
  <p>Log in with your Bugzilla username and password.</p>
  <table>
    <tr>
      <td>Bugzilla Username</td>
      <td><input type="text" class="username" id="login-username"/></td>
    </tr>
    <tr>
      <td>Bugzilla Password</td>
      <td><input type="password" class="password" id="login-password"/></td>
    </tr>
  </table>
  <br/>
  <input type="submit" id="login-submit" value="Log In"/>
  </form>
  </div>
</div>
<div id="add-member" class="dialog">
  <div class="content">
  <form id="add-member-form">
  <p>Type an email address below.</p>
  <table>
   <tr>
      <td>Name</td>
      <td><input type="text" class="query" id="add-member-query"/></td>
    </tr>
  </table>
  <br/>
  <input type="submit" id="add-member-submit"
         value="Add"/>
  </form>
  </div>
</div>
<div id="add-member-self" class="dialog">
  <div class="content">
  <form id="add-member-self-form">
  <p>Add yourself to this team?</p>
  <br/>
  <input type="submit" id="add-member-self-submit"
         value="Add"/>
  </form>
  </div>
</div>
<div id="add-prodcomp" class="dialog">
  <div class="content">
  <form id="add-prodcomp-form">
  <table>
   <tr>
      <td>Product</td>
      <td><select id="select-prod" multiple="multiple" size="5"></select></td>
    </tr>
   <tr>
      <td>Component</td>
      <td><select id="select-comp" multiple="multiple" size="5"></select></td>
    </tr>
  </table>
  <br/>
  <input type="submit" id="add-prodcomp-submit"
         value="Add"/>
  </form>
  </div>
</div>
<div id="add-division" class="dialog">
  <div class="content">
  <form id="add-division-form">
  <p>Type a division name below.</p>
  <table>
   <tr>
      <td>Division</td>
      <td><input type="text" id="add-division-query"/></td>
    </tr>
  </table>
  <br/>
  <input type="submit" id="add-division-submit"
         value="Add"/>
  </form>
  </div>
</div>
<div id="add-team" class="dialog">
  <div class="content">
  <form id="add-team-form">
  <p>Type a team name below.</p>
  <table>
   <tr>
      <td>Team</td>
      <td><input type="text" id="add-team-query"/></td>
    </tr>
  </table>
  <br/>
  <input type="submit" id="add-team-submit"
         value="Add"/>
  </form>
  </div>
</div>
<div id="del-entry" class="dialog">
  <div class="content">
  <form id="del-entry-form">
  <p>Delete <span id="del-entry-type"></span> <span id="del-entry-name"></span>?</p>
  <br/>
  <input type="button" id="del-team-cancel"
         value="Cancel"/>
  <input type="submit" id="del-team-submit"
         value="OK"/>
  </form>
  </div>
</div>
<div id="mod-release" class="dialog">
  <div class="content">
  <form id="mod-release-form">
  <p><span id="mod-release-name"></span></p>
  <input type="text" id="mod-release-query"/><br/>
  <br/>
  <input type="button" id="mod-release-cancel"
         value="Cancel"/>
  <input type="submit" id="mod-release-submit"
         value="OK"/>
  </form>
  </div>
</div>
<div id="errors"></div>
<div id="templates">
  <div class="normallistentry listentry"><div class="listentrytext"><span class="listentrytextspan"></span></div><div class="listentrybutton nodisplay buttondel"><button class="siteadminbutton adminbutton" type="button">&ndash;</button></div></div>
  <div class="releaselistentry listentry"><div class="listentrytext"><span class="listentrytextspan listentrytextname"></span><span class="listentrytextspan listentrytextvalue"></span></div><div class="listentrybutton nodisplay buttonmod"><button class="siteadminbutton adminbutton" type="button">...</button></div></div>
  <div class="prodcomplistentry listentry"><div class="listentrytext"><span class="listentrytextspan"></span></div><div class="listentrybutton nodisplay buttondel"><button class="teamadminbutton adminbutton" type="button">&ndash;</button></div></div>
  <div class="memberlistentry listentry"><div class="listentrytext"><span class="listentrytextspan"></span><span class="listentrysiteadminspan nodisplay"> <b>[site admin]</b></span><span class="listentryteamadminspan nodisplay"> <b>[team admin]</b></span></div><div class="listentrybutton nodisplay buttonsiteadmin"><button class="siteadminbutton adminbutton" type="button"></button></div>
  <div class="listentrybutton nodisplay buttonteamadmin"><button class="teamadminbutton adminbutton" type="button"></button></div>
  <div class="listentrybutton nodisplay buttondel"><button class="teamadminbutton adminbutton" type="button">&ndash;</button></div></div>
  <div class="listentrynone">none</div>
  <div class="errors">
    <div class="bugzilla-api-error">I had trouble talking to Bugzilla.
    Perhaps you entered the wrong username/password, or I
    messed up.</div>
    <div class="bugzilla-auth-error">Wrong username/password!</div>
    <div class="unknown-error">An unknown error occurred.</div>
 </div>
</div>
</body>
<!-- Base Scripts -->
<script src="js/jquery.js"></script>
<script src="js/require.js"></script>
<script>
$(window).ready(function() {
  var moduleScriptNames = [
    "app",
    "date-utils",
    "cache",
    "xhr"
  ];

  var scripts = [
    "js/jquery-ui.js",
    "js/jquery.tipsy.js",
    "js/jquery.selectboxes.js",
    "js/bugzilla.js"
  ];

  moduleScriptNames.forEach(function(name) {
    scripts.push("js/modules/" + name + ".js");
  });

  if (!('JSON' in window))
    scripts.push("js/json2.js");

  Require.preload(document, scripts, function whenLoaded() {
    $("#loading-screen").hide();
    $(".hide-while-loading").show();

    var options = {
      jQuery: jQuery,
      Bugzilla: Bugzilla,
      window: window,
      admin: true
    };

    if (document.location.search == "?testing=1") {
      window.parent.onDashboardLoaded(window, options);
      return;
    }

    var moduleExports = {};
    var require = Require.build(Require.modules, moduleExports);
    require("app/loader").init(moduleExports, options);
  });
});
</script>
</html>
